{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Smart Proxy Documentation","text":"<p>Welcome to the Smart Proxy documentation. This project provides an intelligent reverse proxy for Kubernetes and OpenShift environments, enabling advanced features like auto-sleeping deployments, dependency management, and seamless routing.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Auto-Sleep &amp; Wake: Automatically scale down inactive deployments to save resources and checking internal traffic to wake them up on demand.</li> <li>Dependency Management: Define chains of dependent services that start/stop together.</li> <li>Unified Patching: Manage both Kubernetes Ingresses and OpenShift Routes from a single interface.</li> <li>Admin Dashboard: A modern React-based UI for monitoring and configuration.</li> <li>Observability: Real-time logs and status updates.</li> </ul>"},{"location":"#navigation","title":"Navigation","text":"<ul> <li>Installation Guide - How to deploy Smart Proxy.</li> <li>Architecture - How it works under the hood.</li> <li>Configuration - detailed configuration options.</li> </ul>"},{"location":"architecture/","title":"Architecture","text":"<p>Smart Proxy acts as a \"Man-in-the-Middle\" for your Kubernetes Ingresses and OpenShift Routes.</p>"},{"location":"architecture/#workflow","title":"Workflow","text":"<ol> <li> <p>Patching: When you \"Patch\" a route via the Admin UI, Smart Proxy modifies the Ingress/Route to point to its own service (<code>smart-proxy</code>) instead of the original application service.</p> <ul> <li>The original configuration is saved in annotations (<code>smart-proxy/original-service</code>).</li> <li>The <code>smart-proxy/patched</code> annotation is set to <code>true</code>.</li> </ul> </li> <li> <p>Request Handling:</p> <ul> <li>Users access <code>app.example.com</code>.</li> <li>Traffic hits <code>smart-proxy</code>.</li> <li>The proxy checks the <code>Host</code> header to find the corresponding configuration.</li> </ul> </li> <li> <p>Idle Detection:</p> <ul> <li>If the target deployment is scaled to 0 (sleeping), the proxy holds the request and triggers a scale-up.</li> <li>It shows a \"Waking Up\" page to the user.</li> <li>Once the deployment is ready, it proxies the request.</li> <li>A timer tracks inactivity. If no requests occur within the <code>IdleTimeout</code>, the proxy scales the deployment back to 0.</li> </ul> </li> <li> <p>Dependencies:</p> <ul> <li>If a route has dependencies configured, the proxy ensures all dependent services are running before forwarding traffic.</li> <li>Usage of one service keeps the entire chain alive.</li> <li>When the main service idles, dependencies can optionally be stopped as well.</li> </ul> </li> </ol>"},{"location":"configuration/","title":"Configuration","text":""},{"location":"configuration/#environment-variables","title":"Environment Variables","text":"Variable Description Default <code>SMART_PROXY_PORT</code> The HTTP port the proxy listens on. <code>80</code> <code>WATCH_NAMESPACE</code> The namespace to watch for resources. <code>default</code> (or current NS) <code>LOG_LEVEL</code> Logging verbosity (debug, info, error). <code>info</code>"},{"location":"configuration/#annotations","title":"Annotations","text":"<p>Smart Proxy uses annotations on Ingress/Route objects to store state and configuration.</p> Annotation Description <code>smart-proxy/patched</code> <code>true</code> if the resource is currently managed by Smart Proxy. <code>smart-proxy/original-service</code> The name of the backend service before patching. <code>smart-proxy/original-port</code> The port of the backend service before patching. <code>smart-proxy/config</code> JSON string containing advanced configuration (dependencies, timeouts)."},{"location":"configuration/#helm-values","title":"Helm Values","text":"<p>See the <code>charts/smart-proxy/values.yaml</code> file for a complete list of Helm configuration options.</p>"},{"location":"installation/","title":"Installation Guide","text":""},{"location":"installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Kubernetes 1.24+ or OpenShift 4.x</li> <li>Helm 3.x</li> <li>specialized ServiceAccount permissions (handle by Helm chart)</li> </ul>"},{"location":"installation/#installing-via-helm","title":"Installing via Helm","text":"<ol> <li> <p>Clone the repository:     <pre><code>git clone https://github.com/your-org/smart-proxy.git\ncd smart-proxy\n</code></pre></p> </li> <li> <p>Install the chart:     <pre><code>helm install smart-proxy ./charts/smart-proxy --namespace smart-proxy-system --create-namespace\n</code></pre></p> </li> <li> <p>Verify installation:     <pre><code>kubectl get pods -n smart-proxy-system\n</code></pre></p> </li> </ol>"},{"location":"installation/#installing-via-docker-local-development","title":"Installing via Docker (Local Development)","text":"<p>We provide a script to set up a local development environment using Docker Desktop's Kubernetes.</p> <ol> <li>Ensure Docker Desktop is running with Kubernetes enabled.</li> <li> <p>Run the setup script:     <pre><code>./scripts/setup-local.sh\n</code></pre>     This script will:</p> <ul> <li>Build the Docker image locally.</li> <li>Deploy the Smart Proxy, Redis, and a demo Frontend/Backend application.</li> <li>Configure local Ingress resources.</li> </ul> </li> <li> <p>Access the Dashboard:</p> <ul> <li>Add <code>127.0.0.1 admin.local</code> to your <code>/etc/hosts</code>.</li> <li>Visit <code>http://admin.local</code>.</li> </ul> </li> </ol>"},{"location":"installation/#docker-image","title":"Docker Image","text":"<p>The Docker image is available on Quay.io (example): <pre><code>docker pull quay.io/your-user/smart-proxy:latest\n</code></pre></p>"}]}